# Central de SeguranÃ§a IndÃºstrias Wayne

O **Central de SeguranÃ§a IndÃºstrias Wayne** Ã© um sistema web desenvolvido para gerenciar operaÃ§Ãµes de seguranÃ§a das IndÃºstrias Wayne.  

Ele oferece:  
- AutenticaÃ§Ã£o de usuÃ¡rios com diferentes nÃ­veis de acesso (`admin`, `gerente`, `funcionÃ¡rio`).  
- Gerenciamento de recursos (veÃ­culos, armas, acessÃ³rios, trajes).  
- SolicitaÃ§Ã£o e aprovaÃ§Ã£o de novos equipamentos.  
- ExibiÃ§Ã£o de alertas de seguranÃ§a com efeitos visuais e sonoros.  
- VisualizaÃ§Ã£o de estatÃ­sticas de crimes, recursos e atividades dos usuÃ¡rios em um dashboard interativo.  
- OperaÃ§Ãµes CRUD (criar, ler, atualizar, deletar) para recursos e solicitaÃ§Ãµes.  
- PÃ¡gina de boas-vindas exibindo o nome do usuÃ¡rio logado (e.g., *â€œBem-vindo, Bruce Wayne!â€*).  

---

## ğŸš€ Funcionalidades
- **AutenticaÃ§Ã£o**: Login com JWT (JSON Web Tokens).  
- **Boas-Vindas**: Mensagem personalizada no `welcome.html`.  
- **Gerenciamento de Recursos**: CRUD com status automÃ¡tico (DisponÃ­vel/IndisponÃ­vel).  
- **SolicitaÃ§Ãµes de Recursos**: gerentes/admins solicitam;  funcionÃ¡rios concluem.  
- **Dashboard**: GrÃ¡ficos de crimes por vilÃ£o e bairro, recursos por tipo e disponibilidade e atividades dos usuÃ¡rios.  
- **Alertas**: Tela piscante e som de sirene para alertas de seguranÃ§a.  
- **Controle de Acesso**: Funcionalidades restritas por papel.  
- **Logout**: Finaliza sessÃ£o e redireciona para o login.  

---

## ğŸ›  Tecnologias Utilizadas
**Backend**  
- Python 3.8+  
- FastAPI  
- SQLAlchemy  
- MySQL (gerenciado pelo MySQL Workbench)
- python-jose (JWT)  
- passlib (hash de senhas com bcrypt) 
- PyMySQL (driver para conectar Python ao MySQL) 

**Frontend**  
- HTML5, CSS3, JavaScript (ES6)  
- Chart.js  

**Outros**  
- Uvicorn (servidor ASGI)  
- Markdown (documentaÃ§Ã£o)  

---

## ğŸ“¦ PrÃ©-requisitos
- Python 3.8+  
- pip (gerenciador de pacotes)  
- Navegador web moderno (Chrome, Firefox, etc.)  
- (Opcional) Git  
- (Opcional) VS Code ou outro editor  

---

## âš™ï¸ InstalaÃ§Ã£o
1. **Clone o RepositÃ³rio**  
   ```bash
   git clone https://github.com/seu-usuario/central-seguranca-wayne.git
   cd central-seguranca-wayne
   ```

2. **Crie e Ative o Ambiente Virtual**  
   ```bash
   python -m venv venv
   # Windows
   venv\Scripts\activate
   # Linux/Mac
   source venv/bin/activate
   ```

3. **Instale as DependÃªncias**  
   ```bash
   pip install fastapi uvicorn sqlalchemy python-jose[cryptography] passlib[bcrypt] python-multipart pymysql
   ```

4. **Configure o Banco de Dados**  
   - Crie o bando de dados no MySQLWorkbench, conforme arquivo database.sql
   - Ao inicializar a aplicaÃ§Ã£o cria as tabelas: 
   - Insira os dados das tabelas no MySQLWorkbench, conforme arquivo database.sql 
  
5. **Estrutura de DiretÃ³rios**  
   ```
   central-seguranca-wayne/
   â”œâ”€â”€ backend/
   â”‚   â”œâ”€â”€ main.py            # Ponto de entrada FastAPI
   â”‚   â”œâ”€â”€ models.py          # Modelos do banco
   â”‚   â”œâ”€â”€ schemas.py         # Schemas Pydantic
   â”‚   â”œâ”€â”€ crud.py            # FunÃ§Ãµes CRUD
   â”‚   â”œâ”€â”€ auth.py            # AutenticaÃ§Ã£o JWT
   â”‚   â”œâ”€â”€ database.py        # ConfiguraÃ§Ã£o banco
   â”‚   â”œâ”€â”€ routers/           # Endpoints
   â”‚       â”œâ”€â”€ users.py
   â”‚       â”œâ”€â”€ resources.py
   â”‚       â”œâ”€â”€ requests.py
   â”‚       â”œâ”€â”€ request_resource.py
   â”‚       â”œâ”€â”€ dashboard.py
   â”‚       â””â”€â”€ alerts.py   
   â”œâ”€â”€ frontend/
   â”‚   â”œâ”€â”€ css/style.css
   â”‚   â”œâ”€â”€ js/script.js
   â”‚   â”œâ”€â”€ sounds/siren.mp3
   â”‚   â”œâ”€â”€ index.html
   â”‚   â”œâ”€â”€ welcome.html
   â”‚   â”œâ”€â”€ dashboard.html
   â”‚   â”œâ”€â”€ users.html
   â”‚   â”œâ”€â”€ resources.html
   â”‚   â”œâ”€â”€ request_resource.html
   â”‚   â”œâ”€â”€ requests.html
   â”‚   â”œâ”€â”€ alerts.html
   â”‚   â”œâ”€â”€ Wayne.webp
   â”‚   â””â”€â”€ icone.png
   â”œâ”€â”€ venv/
   â”œâ”€â”€ requiriments.txt     # Lista todas as dependencias 
   â”œâ”€â”€ lista.py             # Cria dados para tabela de crimes
   â”œâ”€â”€ database.sql         # Dados para criaÃ§Ã£o do banco de dados e inclusao dedados nas tabelas
   â”œâ”€â”€ senha.py             # Criar hash de senhas
   â””â”€â”€ README.md
   ```

---

## â–¶ï¸ ExecuÃ§Ã£o
### Backend
```bash
uvicorn backend.main:app --reload
```
DisponÃ­vel em: [http://127.0.0.1:8000](http://127.0.0.1:8000)  

### Frontend
- Acesse diretamente: [http://localhost:8000/frontend/index.html](http://localhost:8000/frontend/index.html)  
- Ou rode servidor estÃ¡tico:
  ```bash
  cd frontend
  python -m http.server 8000
  ```

---

## ğŸ”‘ Credenciais PadrÃ£o
- UsuÃ¡rio: `batman`  
- Senha: `darkknight`  
- Papel: `admin`  
- Nome: `Bruce`  

---

## ğŸ“– Uso
- **Login**: `index.html`  
- **PÃ¡gina de Boas-Vindas**: `welcome.html` â†’ *â€œBem-vindo, <nome>!â€*  
- **Admin**: Acesso a todas as funcionalidades.  
- **Gerente**: Gerenciamento de usuÃ¡rios gerenciamento de recursos e solicitaÃ§Ãµes.  
- **FuncionÃ¡rio**: ConclusÃ£o de solicitaÃ§Ãµes boas-vindas.  

---

## ğŸ“¡ Endpoints da API
DocumentaÃ§Ã£o interativa: [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)  

**Exemplo â€“ Login**  
```http
POST /users/token
username=batman&password=darkknight
```

**Recursos**  
- `GET /resources/` â†’ lista recursos  
- `POST /resources/` â†’ cria recurso  
- `PUT /resources/{id}` â†’ edita recurso 
- `DELETE /resources/{id}` â†’ deleta recurso 

**SolicitaÃ§Ãµes**  
- `GET /requests/` â†’ lista status 
- `POST /request_resources/` â†’ cria solicitaÃ§Ã£o  
- `PUT /requests/{id}` â†’ atualiza status 


**Dashboard**  
- `GET /dashboard/stats` â†’ estatÃ­sticas de crimes
- `GET /dashboard/resources` â†’ estatÃ­sticas  de recursos
- `GET /dashboard/requests` â†’ estatÃ­sticas  de requisiÃ§Ãµes

**Alertas**  
- `GET /alerts/` â†’ lista alertas  

---

## ğŸ ResoluÃ§Ã£o de Problemas
- **Erro 404 em /resources/** â†’ verifique inclusÃ£o em `main.py`.  
- **Erro 422** â†’ confirme body enviado corresponde ao schema.  
- **Nome nÃ£o exibido no welcome** â†’ inclua `name` no payload do JWT.  
- **Dashboard sem grÃ¡ficos** â†’ confirme inclusÃ£o do Chart.js.  

---

## ğŸ§ª Testes
### Backend
```bash
uvicorn backend.main:app --reload
curl -X POST "http://localhost:8000/users/token" -d "username=batman&password=darkknight" -H "Content-Type: application/x-www-form-urlencoded"
```

### Frontend
- Login via `index.html`  
- Testar CRUD de recursos e solicitaÃ§Ãµes  
- Conferir dashboard e alertas  


---

## ğŸ¤ ContribuiÃ§Ã£o
1. Fork o repositÃ³rio  
2. Crie uma branch:  
   ```bash
   git checkout -b minha-feature
   ```
3. Commit:  
   ```bash
   git commit -m "Adiciona minha feature"
   ```
4. Push:  
   ```bash
   git push origin minha-feature
   ```
5. Abra um Pull Request  

---

## ğŸ“¦ Empacotamento
```bash
zip -r central_seguranca_wayne.zip .
```

---


## ğŸ“¬ Contato
Para dÃºvidas ou sugestÃµes:  
- Equipe fictÃ­cia da Wayne Enterprises  
- Desenvolvedor principal: *Roberto Siquara*  

---

## ğŸ™ Agradecimentos
- Equipe fictÃ­cia das IndÃºstrias Wayne  
- Bibliotecas open-source: **FastAPI, SQLAlchemy**  